# 接口管理模块重构需求文档

> 文档版本: v1.1
> 创建日期: 2025-02-11
> 更新日期: 2025-02-11
> 产品经理: Claude PM
> 项目代号: Sisyphus-X
>
> **变更记录：**
> - v1.1: 根据用户决策调整优先级（拖拽 P0、移除 Pre-request Script、日志按需显示）
> - v1.0: 初始版本

---

## 1. 项目背景

### 1.1 现状分析

当前 Sisyphus-X 的接口管理模块已经具备基础功能，但存在以下问题：

**前端现状（`frontend/src/pages/interface/`）：**

| 文件 | 功能 | 问题 |
|------|------|------|
| `index.tsx` | 布局容器 | 布局固定，不够灵活 |
| `InterfaceList.tsx` | 左侧目录树 | 功能简陋，缺少拖拽、右键菜单、新建接口入口 |
| `InterfaceEditor.tsx` | 接口调试 | 核心功能完整，但缺少变量引用、历史记录、cURL导入 |
| `FormDataEditor.tsx` | 文件上传 | 基础功能完整 |

**后端现状（`backend/app/api/v1/endpoints/interfaces.py`）：**

| 功能 | 状态 | 说明 |
|------|------|------|
| 接口 CRUD | ✅ 已实现 | 分页查询、创建、更新、删除 |
| 文件夹 CRUD | ✅ 已实现 | 树形结构支持 |
| 请求发送 | ✅ 已实现 | httpx 异步发送，支持文件上传 |
| Swagger 导入 | ✅ 已实现 | 已有接口 |
| 环境变量替换 | ❌ 未实现 | 需要支持 `{{variable}}` 语法 |
| cURL 解析 | ❌ 未实现 | 需要新增 |
| 历史记录 | ❌ 未实现 | 需要新增 |

### 1.2 重构目标

参考 **Apifox** 的接口调试体验，打造专业、高效的 API 调试平台：

1. **左侧目录树**：支持拖拽排序、右键菜单、快速搜索、新建/删除/重命名
2. **主工作区**：默认显示「新建 HTTP 请求」「导入 cURL」卡片
3. **环境管理**：环境切换、变量管理（支持 `{{变量名}}` 引用）
4. **请求编辑器**：Params/Body/Headers/Cookies/Authorization 完整支持
5. **响应展示**：Body/Headers/Cookies/Timeline 结构化展示
6. **Engine 集成**：一键转换为测试用例，同步到 `sisyphus-api-engine`

---

## 2. 功能需求

### 2.1 左侧接口目录树

#### 2.1.1 目录树结构

```
┌─────────────────────────────────────┐
│ 🔍 Search interfaces...            │
│                             [+] [⋮] │
├─────────────────────────────────────┤
│ 📁 用户管理 (展开/折叠)            │
│   ├─ 👤 GET  用户列表             │
│   ├─ 👤 POST 创建用户             │
│   └─ 👤 PUT  更新用户             │
│ 📁 订单管理                        │
│ 📁 支付接口                        │
│ 📁 未分类                          │
└─────────────────────────────────────┘
```

#### 2.1.2 功能清单

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 树形展示 | P0 | 文件夹 + 接口，支持无限层级 |
| 展开/折叠 | P0 | 记住用户展开状态（localStorage） |
| 搜索过滤 | P0 | 实时搜索接口名称 |
| 新建文件夹 | P0 | 右键菜单 + 顶部按钮 |
| 新建接口 | P0 | 右键菜单 + 顶部按钮 |
| 重命名 | P1 | 右键菜单，双击编辑 |
| 删除 | P1 | 右键菜单，带二次确认 |
| 拖拽排序 | **P0** | 同级文件夹/接口拖拽排序（用户决策：MVP 必需） |
| 拖拽移动 | **P0** | 跨文件夹移动接口（用户决策：MVP 必需） |
| 统计数量 | P1 | 文件夹显示接口数量 |

#### 2.1.3 右键菜单

```typescript
// 文件夹右键菜单
const folderContextMenu = [
  '新建接口',
  '新建子文件夹',
  '重命名',
  '删除',
  '复制 ID',
]

// 接口右键菜单
const interfaceContextMenu = [
  '打开',
  '重命名',
  '移动到...',
  '删除',
  '复制为 cURL',
  '生成测试用例',
]
```

---

### 2.2 主工作区 - 默认状态

#### 2.2.1 空状态卡片

未选择接口时，显示欢迎卡片：

```
┌─────────────────────────────────────────────────────────┐
│  ┌─────────────────────┐  ┌─────────────────────┐      │
│  │   🚀 新建请求      │  │   📥 导入 cURL     │      │
│  │                     │  │                     │      │
│  │  点击创建新的 API   │  │  粘贴 cURL 命令    │      │
│  │  调试              │  │  自动解析为请求    │      │
│  └─────────────────────┘  └─────────────────────┘      │
│                                                         │
│  💡 提示：您也可以从左侧目录选择已有接口                │
└─────────────────────────────────────────────────────────┘
```

#### 2.2.2 功能交互

- **新建请求**：创建新接口，跳转到编辑状态
- **导入 cURL**：弹出对话框，解析 cURL 为完整请求
- **快速链接**：最近使用的接口列表（底部显示）

---

### 2.3 环境管理

#### 2.3.1 环境切换

顶部环境选择器：

```
┌─────────────────────────────────────────────────────────┐
│ 环境: [开发环境 ▼]                   [⚙️ 管理环境]  │
└─────────────────────────────────────────────────────────┘
```

#### 2.3.2 环境配置弹窗

```
┌─────────────────────────────────────────────────────────┐
│  环境管理                                  [+ 新建环境] │
├─────────────────────────────────────────────────────────┤
│  [开发环境] [测试环境] [生产环境] [克隆] [删除]        │
├─────────────────────────────────────────────────────────┤
│  Base URL                                              │
│  https://api-dev.example.com                           │
│                                                         │
│  变量                                     [+ 添加变量]  │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ✔︎  token        eyJhbGc...                  │   │
│  │ ✔︎  user_id      12345                       │   │
│  │ ✗  disabled_val xxx          [删除]           │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  请求头                                                 │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ✔︎  Authorization   Bearer {{token}}          │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

#### 2.3.3 变量引用语法

支持在任意输入框中使用 `{{变量名}}` 语法：

```
URL:     /api/users/{{userId}}
Headers: Authorization: Bearer {{token}}
Body:    { "username": "{{test_user}}" }
```

变量替换优先级：
1. 当前环境变量
2. 全局变量（项目级，未来扩展）
3. 系统变量（`{{$timestamp}}`, `{{$randomInt}}`）

#### 2.3.4 API 接口

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/v1/projects/{id}/environments` | GET | 获取环境列表 |
| `/api/v1/projects/{id}/environments` | POST | 创建环境 |
| `/api/v1/projects/{id}/environments/{env_id}` | PUT | 更新环境 |
| `/api/v1/projects/{id}/environments/{env_id}` | DELETE | 删除环境 |
| `/api/v1/projects/{id}/environments/{env_id}/copy` | POST | 克隆环境 |

---

### 2.4 接口调试

#### 2.4.1 请求编辑器布局

```
┌─────────────────────────────────────────────────────────────────────┐
│ ← 返回    [接口名称编辑]      环境: [开发 ▼]          [保存] [发送] │
├─────────────────────────────────────────────────────────────────────┤
│ [GET ▼]  /api/users/{{userId}}?status=active                     │
├─────────────────────────────────────────────────────────────────────┤
│ [Params] [Authorization] [Headers] [Body] [Pre-request Script]    │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────┬─────────────────┬─────────────────┬──────┬─────────┐   │
│  │ ✔︎   │ Key             │ Value           │ 类型 │ 操作    │   │
│  ├──────┼─────────────────┼─────────────────┼──────┼─────────┤   │
│  │ ✔︎   │ userId         │ 12345           │ Text │ 🗑️      │   │
│  │ ✗   │ status         │ active          │ Text │ 🗑️      │   │
│  └──────┴─────────────────┴─────────────────┴──────┴─────────┘   │
│                                                             [+ 添加] │
└─────────────────────────────────────────────────────────────────────┘
```

#### 2.4.2 Tab 详解

| Tab | 功能 | 字段 | 说明 |
|-----|------|------|------|
| **Params** | URL 查询参数 | Key/Value/Description/启用状态 | - |
| **Authorization** | 认证配置 | No Auth/Bearer API Key/Basic Auth/OAuth 2.0 | - |
| **Headers** | 请求头 | Key/Value/Description | - |
| **Body** | 请求体 | none/JSON/form-data/x-www-form-urlencoded/raw | - |

> **用户决策**：Pre-request Script 功能暂不实现，已从 MVP 中移除，后续迭代规划见 §8.1

#### 2.4.3 Body 类型支持

| 类型 | 编辑器 | 说明 |
|------|--------|------|
| **none** | - | 无请求体（GET/DELETE 默认） |
| **JSON** | Monaco Editor | 语法高亮、格式化、校验 |
| **form-data** | KV 编辑器 | 支持文件上传（通过 MinIO） |
| **x-www-form-urlencoded** | KV 编辑器 | 表单编码 |
| **raw** | Monaco Editor | 纯文本/XML/HTML |

#### 2.4.4 Authorization 认证

**Phase 1（MVP）：**

| 类型 | 字段 |
|------|------|
| No Auth | - |
| Bearer Token | Token（支持变量引用） |
| API Key | Key/Value/Add to（Header/Query） |
| Basic Auth | Username/Password |

**Phase 2（扩展）：**

| 类型 | 字段 |
|------|------|
| OAuth 2.0 | 完整 OAuth 流程 |
| JWT | 动态 Token 刷新 |

---

### 2.5 响应展示

#### 2.5.1 响应区域布局

```
┌─────────────────────────────────────────────────────────────────────┐
│ Response                              [200 OK]    [125ms]  [1.2KB] │
│                                        [▶ 展开日志]              │
├─────────────────────────────────────────────────────────────────────┤
│ [Body] [Headers] [Cookies] [Timeline] [Test Results]            │
├─────────────────────────────────────────────────────────────────────┤
│ {                                                                │
│   "code": 0,                                                     │
│   "data": {                                                      │
│     "users": [                                                   │
│       { "id": 1, "name": "Alice" },                             │
│       { "id": 2, "name": "Bob" }                                │
│     ]                                                            │
│   },                                                             │
│   "message": "success"                                           │
│ }                                                                │
│                                                                 [▼ 大小] [复制] [下载] │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 📋 执行日志                                    [收起 ▲]     │ │
│ │ ├─ 14:32:01.234  准备请求                                  │ │
│ │ ├─ 14:32:01.345  替换环境变量: {{token}} → eyJhbGc...       │ │
│ │ ├─ 14:32:01.456  发送请求: GET /api/users                   │ │
│ │ ├─ 14:32:01.567  DNS 解析: 12.3ms                          │ │
│ │ ├─ 14:32:01.678  TCP 连接: 23.4ms                          │ │
│ │ ├─ 14:32:01.789  TTFB: 45.6ms                             │ │
│ │ └─ 14:32:01.890  响应接收: 11.2ms (1.2KB)                 │ │
│ └─────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

> **用户决策**：执行日志默认隐藏，用户可点击「展开日志」查看详细信息

#### 2.5.2 Tab 详解

| Tab | 功能 | 格式化 |
|-----|------|--------|
| **Body** | 响应体 | JSON 格式化/纯文本 |
| **Headers** | 响应头 | Key-Value 表格 |
| **Cookies** | Cookie | 解析 Set-Cookie |
| **Timeline** | 时间线 | DNS/TCP/TTFB/Download（可展开） |
| **Test Results** | 断言结果 | Pass/Fail 统计（未来） |

#### 2.5.2.1 执行日志（可展开）

默认收起状态，点击「展开日志」后显示：

```typescript
interface LogEntry {
  timestamp: string    // "14:32:01.234"
  type: 'info' | 'success' | 'warning' | 'error'
  message: string      // "准备请求"
  details?: any       // 详细数据（可选）
}
```

日志类型：
- **info**: 普通信息（准备请求、发送请求）
- **success**: 成功信息（环境变量替换成功）
- **warning**: 警告信息（变量未找到、使用默认值）
- **error**: 错误信息（网络错误、解析失败）

#### 2.5.3 状态码颜色

| 范围 | 颜色 | 说明 |
|------|------|------|
| 2xx | 绿色 | 成功 |
| 3xx | 黄色 | 重定向 |
| 4xx | 橙色 | 客户端错误 |
| 5xx | 红色 | 服务端错误 |
| Error | 红色 | 网络错误 |

---

### 2.6 cURL 导入

#### 2.6.1 cURL 解析器

**输入示例：**

```bash
curl -X POST https://api.example.com/users \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {{token}}' \
  -d '{"name":"Alice","email":"alice@example.com"}'
```

**解析结果：**

| 字段 | 值 |
|------|-----|
| Method | POST |
| URL | https://api.example.com/users |
| Headers | Content-Type: application/json<br>Authorization: Bearer {{token}} |
| Body | `{"name":"Alice","email":"alice@example.com"}` |

#### 2.6.2 后端实现

```python
# backend/app/services/curl_parser.py

from typing import Dict, Any
import shlex

def parse_curl_command(curl_command: str) -> Dict[str, Any]:
    """
    解析 cURL 命令为接口请求结构
    """
    # 使用 shlex 分割命令
    # 使用正则提取 -H, -d, --data-raw 等参数
    # 返回标准化请求结构
    pass
```

**API 接口：**

```
POST /api/v1/interfaces/parse-curl
Request: { "curl_command": "curl ..." }
Response: { url, method, headers, body, params }
```

---

### 2.7 与 sisyphus-api-engine 打通

#### 2.7.1 测试用例生成

在接口编辑器顶部新增「生成测试用例」按钮：

```
┌─────────────────────────────────────────────────────────────────────┐
│ ← 返回    [接口名称]      [保存] [发送]  [🧪 生成测试用例]      │
└─────────────────────────────────────────────────────────────────────┘
```

点击后弹出对话框：

```
┌─────────────────────────────────────────────────────────────────────┐
│  生成测试用例                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  测试用例名称: [用户列表查询-默认状态]                            │
│  关键字名称: [get_user_list]                                     │
│  所属场景: [选择场景 ▼]                                           │
│                                                                 │
│  ☑  自动生成断言                                                 │
│  ☑  保存为关键字                                                 │
│                                                                 │
│  [取消]                                    [生成并保存]           │
└─────────────────────────────────────────────────────────────────────┘
```

#### 2.7.2 YAML 格式输出

生成的测试用例符合 sisyphus-api-engine 的 YAML 格式：

```yaml
name: 用户列表查询-默认状态
base_url: https://api-dev.example.com
variables:
  token: eyJhbGc...

request:
  method: GET
  path: /api/users
  params:
    status: active
  headers:
    Authorization: Bearer {{token}}

assertion:
  - type: status_code
    expected: 200
  - type: json_path
    path: $.code
    expected: 0
```

#### 2.7.3 后端实现

```python
# backend/app/services/test_case_generator.py

class TestCaseGenerator:
    def generate_from_interface(self, interface_id: int) -> str:
        """
        从接口配置生成 YAML 测试用例
        """
        # 1. 获取接口配置
        # 2. 获取环境变量
        # 3. 生成 YAML 结构
        # 4. 写入 sisyphus-api-engine/cases/
        # 5. 返回文件路径
        pass

    def generate_keyword(self, interface_id: int) -> str:
        """
        生成关键字文件
        """
        # 1. 提取接口核心参数
        # 2. 生成 Python 关键字函数
        # 3. 写入 sisyphus_api_engine/keywords/
        pass
```

**API 接口：**

```
POST /api/v1/interfaces/{id}/generate-test-case
Request: {
  "case_name": "用户列表查询",
  "keyword_name": "get_user_list",
  "scenario_id": 1,
  "auto_assertion": true
}
Response: {
  "yaml_path": "engines/sisyphus_api_engine/cases/user_list.yaml",
  "keyword_path": "engines/sisyphus_api_engine/keywords/get_user_list.py"
}
```

---

## 3. 技术架构

### 3.1 前端架构

```
frontend/src/pages/interface/
├── index.tsx                      # 布局容器
├── components/
│   ├── InterfaceTree.tsx           # 左侧目录树（含拖拽）
│   ├── WelcomeCards.tsx            # 欢迎卡片
│   ├── RequestEditor/
│   │   ├── MethodSelector.tsx      # 方法选择器
│   │   ├── UrlInput.tsx            # URL 输入框
│   │   ├── EnvironmentSelector.tsx  # 环境选择器
│   │   ├── Tabs/
│   │   │   ├── ParamsTab.tsx       # Params 编辑器
│   │   │   ├── AuthTab.tsx         # Authorization 编辑器
│   │   │   ├── HeadersTab.tsx      # Headers 编辑器
│   │   │   └── BodyTab.tsx         # Body 编辑器
│   │   └── KeyValueEditor.tsx      # 通用 KV 编辑器
│   └── ResponseViewer/
│       ├── ResponseTabs.tsx         # 响应 Tabs
│       ├── BodyViewer.tsx           # Body 展示器
│       ├── HeadersViewer.tsx        # Headers 展示器
│       ├── TimelineViewer.tsx       # Timeline 展示器
│       └── ExecutionLog.tsx         # 执行日志（可展开）
├── dialogs/
│   ├── EnvironmentDialog.tsx        # 环境管理弹窗
│   ├── CurlImportDialog.tsx        # cURL 导入弹窗
│   └── GenerateCaseDialog.tsx      # 生成测试用例弹窗
├── hooks/
│   ├── useVariableReplacement.ts    # 变量替换 Hook
│   ├── useRequestHistory.ts        # 请求历史 Hook
│   └── useDragDrop.ts             # 拖拽排序 Hook
└── utils/
    ├── curlParser.ts                # cURL 解析器
    └── variableParser.ts            # 变量解析器
```

### 3.2 后端架构

```
backend/app/
├── api/v1/endpoints/
│   └── interfaces.py               # 接口路由（已存在，需扩展）
├── services/
│   ├── interface_service.py         # 接口业务逻辑（新增）
│   ├── environment_service.py       # 环境管理服务（新增）
│   ├── curl_parser.py              # cURL 解析器（新增）
│   └── test_case_generator.py      # 测试用例生成器（新增）
├── models/
│   └── project.py                  # 数据模型（已存在）
└── schemas/
    └── interface.py                 # Pydantic Schema（已存在，需扩展）
```

### 3.3 核心依赖

| 依赖 | 用途 | 版本 |
|------|------|------|
| @dnd-kit/core | 拖拽排序 | ^6.1.0 |
| @dnd-kit/sortable | 可排序列表 | ^8.0.0 |
| react-contextmenu | 右键菜单 | ^2.14.0 |
| @monaco-editor/react | 代码编辑器 | ^4.6.0 |
| shlex | cURL 解析（后端） | Python stdlib |
| pyyaml | YAML 生成（后端） | ^6.0.1 |

---

## 4. 数据模型扩展

### 4.1 接口历史记录表（新增）

```python
# backend/app/models/interface_history.py

class InterfaceHistory(SQLModel, table=True):
    __tablename__ = "interfacehistory"

    id: int | None = Field(default=None, primary_key=True)
    interface_id: int = Field(foreign_key="interface.id")
    user_id: int = Field(foreign_key="user.id")

    # 请求快照
    url: str
    method: str
    headers: dict = Field(default={}, sa_column=Column(JSON))
    params: dict = Field(default={}, sa_column=Column(JSON))
    body: dict = Field(default={}, sa_column=Column(JSON))

    # 响应快照
    status_code: int | None = None
    response_headers: dict = Field(default={}, sa_column=Column(JSON))
    response_body: dict = Field(default={}, sa_column=Column(JSON))
    elapsed: float | None = None

    created_at: datetime = Field(default_factory=datetime.utcnow)
```

### 4.2 测试用例表（新增）

```python
# backend/app/models/test_case.py

class InterfaceTestCase(SQLModel, table=True):
    __tablename__ = "interfacetestcase"

    id: int | None = Field(default=None, primary_key=True)
    interface_id: int = Field(foreign_key="interface.id")
    project_id: int = Field(foreign_key="project.id")

    name: str
    keyword_name: str
    yaml_path: str  # 相对于 engines/ 目录
    scenario_id: int | None = Field(default=None, foreign_key="scenario.id")

    # 断言配置
    assertions: dict = Field(default={}, sa_column=Column(JSON))

    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```

---

## 5. 开发计划

### Phase 1: 核心功能（2 周）

| 任务 | 前端 | 后端 | 优先级 | 说明 |
|------|------|------|--------|------|
| 左侧目录树重构 | ✅ | ✅ | P0 | 包含拖拽排序和跨文件夹移动 |
| 欢迎卡片 | ✅ | - | P0 | 新建请求/导入 cURL 入口 |
| 环境管理 | ✅ | ✅ | P0 | 环境切换、变量管理 |
| 变量引用 | ✅ | ✅ | P0 | `{{}}` 语法支持 |
| cURL 导入 | ✅ | ✅ | P0 | cURL 解析器 |
| 执行日志 | ✅ | ✅ | P0 | 默认隐藏，可展开查看 |

### Phase 2: 增强功能（1 周）

| 任务 | 前端 | 后端 | 优先级 | 说明 |
|------|------|------|--------|------|
| Authorization 认证 | ✅ | ✅ | P1 | Bearer/API Key/Basic Auth |
| 响应 Timeline | ✅ | - | P1 | DNS/TCP/TTFB/Download |
| 请求历史 | ✅ | ✅ | P1 | 历史记录存储和查询 |

### Phase 3: Engine 集成（1 周）

| 任务 | 前端 | 后端 | 优先级 | 说明 |
|------|------|------|--------|------|
| 测试用例生成 | ✅ | ✅ | P0 | 一键生成 YAML |
| YAML 输出 | - | ✅ | P0 | 符合 engine 规范 |
| 关键字生成 | - | ✅ | P1 | Python 关键字函数 |

---

## 6. 验收标准

### 6.1 功能验收

- [ ] 左侧目录树支持完整 CRUD 操作
- [ ] **拖拽排序和跨文件夹移动功能流畅可用**（用户决策：MVP 必需）
- [ ] 环境变量 `{{变量名}}` 在所有字段中正确替换
- [ ] cURL 导入解析准确率 > 95%
- [ ] 生成的测试用例 YAML 符合 sisyphus-api-engine 规范
- [ ] 响应展示支持所有格式（JSON/XML/HTML/纯文本）
- [ ] **执行日志默认隐藏，点击「展开日志」后可正常显示**（用户决策：按需显示）
- [ ] Pre-request Tab 已从 UI 中移除（用户决策：暂不实现）

### 6.2 性能验收

- 接口列表加载时间 < 500ms
- 环境切换响应时间 < 200ms
- 变量替换计算时间 < 50ms
- cURL 解析时间 < 100ms

### 6.3 兼容性验收

- Chrome 120+
- Firefox 120+
- Safari 17+
- Edge 120+

---

## 7. 风险评估

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| cURL 解析器复杂度 | 高 | 中 | 使用成熟库（如 curl-to-python） |
| 变量替换性能 | 中 | 低 | 使用正则缓存 + 编译优化 |
| Engine YAML 格式变更 | 高 | 中 | 抽象 YAML 生成层，支持格式版本化 |
| 拖拽交互复杂度 | **低** | **低** | 使用 @dnd-kit，**MVP 阶段完整实现** |
| 执行日志性能 | 低 | 低 | 限制日志条目数量，使用虚拟滚动 |

---

## 8. 后续迭代规划

### v1.1（1 个月后）

- **Pre-request Script**（JavaScript 沙箱）- **用户决策：暂不实现，后续有需求再做**
- Tests 脚本（响应断言）
- 接口对比（版本对比）
- Mock 服务

### v1.2（3 个月后）

- WebSocket 支持
- GraphQL 调试
- gRPC 调试
- 接口文档自动生成

---

## 9. 用户决策记录

| 决策项 | 内容 | 日期 |
|--------|------|------|
| **拖拽功能优先级** | 从 P2 调整为 P0，MVP 必须实现完整的拖拽排序和跨文件夹移动 | 2025-02-11 |
| **Pre-request Script** | 第一版不实现，已从 MVP 中移除，预留 Tab 入口但不实现逻辑 | 2025-02-11 |
| **执行日志显示** | 默认隐藏，用户点击「展开日志」按钮后查看详细信息 | 2025-02-11 |

---

## 附录

### A. Apifox 参考截图

（待补充实际 UI 截图）

### B. 变量引用语法规范

```
{{variable_name}}           # 环境变量
{{$timestamp}}              # 当前时间戳
{{$randomInt(min, max)}}    # 随机整数
{{$guid}}                   # 随机 GUID
```

### C. cURL 支持度

| 特性 | 支持度 |
|------|--------|
| -X/--request | ✅ |
| -H/--header | ✅ |
| -d/--data/--data-raw | ✅ |
| --data-urlencode | ✅ |
| -F/--form | ✅ |
| -u/--user | ✅ |
| --compressed | ✅ |
| -k/--insecure | ✅ |
| -x/--proxy | ❌ |

---

**文档结束**
